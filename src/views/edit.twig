{% extends "layout.twig" %}
{% set active_page = "edit" %}

{% block content %}
  <legend>New Book</legend>
  <form class="form-horizontal" role="form" method="post" action="/edit">
  {{ form_widget(form._token) }}
    <div class="form-group">
      <label class="col-sm-2 control-label">Category</label>
      <div class="col-sm-10">
        <select id="categories" class="form-control" name="form[category_id]">
          {% for category in categories %}
            <option value="{{category.id|e}}" {% if book and book.category_id == category.id %}selected{% endif %}>
              {{category.label}}: {{category.description}}
            </option>
          {% endfor %}
        </select>
      <span class="help-inline text-danger">{{ form_errors(form.category_id) }}</span>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2 control-label">Author</label>
      <div class="col-sm-10">
        <input name="form[author]" type="text" class="form-control" placeholder="Author" value="{{book.author|default()|e}}">
      <span class="help-inline text-danger">{{ form_errors(form.author) }}</span>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2 control-label">Title</label>
      <div class="col-sm-10">
        <input name="form[title]" type="text" class="form-control" placeholder="Title" value="{{book.title|default()|e}}">
      <span class="help-inline text-danger">{{ form_errors(form.title) }}</span>
      </div>
    </div>
    <div class="form-group">
      <label  class="col-sm-2 control-label">Publisher</label>
      <div class="col-sm-10">
        <input name="form[publisher]" type="text" class="form-control" placeholder="Publisher" value="{{book.publisher|default()|e}}">
      <span class="help-inline text-danger">{{ form_errors(form.publisher) }}</span>
      </div>
    </div>
    <div class="form-group">
      <label  class="col-sm-2 control-label">Comment</label>
      <div class="col-sm-10">
        <input name="form[comment]" type="text" class="form-control" placeholder="Comment" value="{{stash_data.comment|default()|e}}">
      <span class="help-inline text-danger">{{ form_errors(form.comment) }}</span>
      </div>
    </div>
    <div class="form-group">
      <div class="col-sm-offset-2 col-sm-10">
        <button type="submit" class="btn btn-primary">Register</button>
        <button type="reset" class="btn btn-default">Reset</button>
      </div>
    </div>
  </form>
{% endblock %}
